(this.webpackJsonpass=this.webpackJsonpass||[]).push([[0],{171:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c(14),n=c.n(a),i=(c(61),c(62),c(15)),l=c(11),r=(c(63),c(55)),d=c(4),j=c(1),o=function(e){var t=e.info.user?" flex-row-reverse":" flex-row",c=e.info.user?" my-message ":" boot-message ",s=e.info.user?" d-flex flex-row-reverse text-start ":"  ";return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"d-flex flex-column fading",children:[Object(j.jsx)("div",{className:"d-flex "+t,children:Object(j.jsx)("div",{className:c+" p-3 text-justify",style:{maxWidth:"40%"},children:Object(j.jsx)("span",{children:e.info.msg})})}),Object(j.jsx)("span",{className:s,children:Object(j.jsx)("small",{children:e.info.time})})]})})},h=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"d-flex flex-column",children:Object(j.jsx)("div",{className:" d-flex flex-row-reverse",children:Object(j.jsx)("div",{className:"my-message p-3 text-justify",style:{maxWidth:"40%"},children:Object(j.jsxs)("h5",{id:"waiting_msg",children:[Object(j.jsx)("span",{children:"."})," ",Object(j.jsx)("span",{children:"."})," ",Object(j.jsx)("span",{children:"."})]})})})})})},b=function(e){var t=Object(s.useRef)(e.chats[e.Selected_chat].ws);Object(s.useEffect)((function(){console.log("im runing")}),[e.chats]);var c=Object(s.useState)(""),a=Object(l.a)(c,2),n=a[0],r=a[1];return Object(j.jsx)("div",{className:"col-9 fading",children:Object(j.jsxs)("div",{className:"d-flex flex-column  align-items-center  ",children:[Object(j.jsxs)("div",{id:"chat_body",className:"mt-3 overflow-auto p-4",children:[0!==e.chats[e.Selected_chat].Messages.length?e.chats[e.Selected_chat].Messages.map((function(e,t){return Object(j.jsx)(o,{info:e},t)})):Object(j.jsxs)("div",{className:" text-center fading",children:[" ",Object(j.jsx)("h4",{children:"No Data Found"})," "]}),e.chats[e.Selected_chat].active?Object(j.jsx)(h,{}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsx)("div",{id:"chat_footer",children:Object(j.jsx)("form",{onSubmit:function(c){!function(c){var s=e.chats,a=(new Date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});c.preventDefault(),s[e.Selected_chat].Messages=[].concat(Object(i.a)(s[e.Selected_chat].Messages),[{msg:n,time:a,user:!1}]),s[e.Selected_chat].active=!0,e.setchats(s),r(""),t.current.send(JSON.stringify(n))}(c)},children:Object(j.jsxs)("div",{className:"input-group  p-2",children:[Object(j.jsx)("input",{type:"text",className:"form-control custom_message_input",disabled:e.chats[e.Selected_chat].active,placeholder:"Please Provide Your Message",value:n,onChange:function(e){return r(e.target.value)}}),Object(j.jsx)("button",{className:"btn btn-outline-primary",type:"submit",children:Object(j.jsx)("i",{className:"far fa-paper-plane"})})]})})})]})})},m=c(26),u=c.n(m),x=c(53),O=c(19),f=c(18),p=c.n(f),v=c(27),g=c.n(v),N=c(54),_=c.n(N),w=function(e){function t(e){return new Promise((function(t){return setTimeout(t,e)}))}var c=Object(s.useState)(!1),a=Object(l.a)(c,2),n=a[0],r=a[1],d=function(){return r(!1)},o=Object(s.useState)("Please Provide a Valid Email Format"),h=Object(l.a)(o,2),b=h[0],m=h[1],f=Object(s.useState)(""),v=Object(l.a)(f,2),N=v[0],w=v[1],S=Object(s.useState)(""),y=Object(l.a)(S,2),C=y[0],k=y[1],E=Object(s.useState)(!0),D=Object(l.a)(E,2),F=D[0],P=D[1],M=function(){var c=Object(x.a)(u.a.mark((function c(s){var a,n;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a=!0,s.preventDefault(),P(!F),c.next=5,t(500);case 5:g.a.isEmail(N)?p()("#email_feed_back").fadeOut():(a=!1,p()("#email_feed_back").fadeIn("slow")),g.a.isAlphanumeric(C)?p()("#order_feed_back").fadeOut():(a=!1,p()("#order_feed_back").fadeIn("slow")),a?(w(""),k(""),n={usermail:N,order_id:C},_.a.post("http://127.0.0.1:8000/chat",n).then((function(t){console.log(t.data);var c={active:!1,email:N,orderid:C,Messages:[],ws:new WebSocket("ws://127.0.0.1:5000/"+e.chats.length)};e.setchats([].concat(Object(i.a)(e.chats),[c])),d()})).catch((function(e){m("This Email is Not Valid"),console.log("This Email is Not Valid",e)})),P(F)):P(F);case 8:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{id:"chat_list",className:"col-3 overflow-auto",children:Object(j.jsxs)("div",{className:"p-3 ",children:[Object(j.jsxs)("h5",{className:"text-center new_chat",onClick:function(){return r(!0)},children:["Create New Chat ",Object(j.jsx)("i",{className:"fas fa-comment-medical"})]}),e.chats.map((function(t,c){return Object(j.jsx)("div",{className:"card  mt-3 mb-3 p-2 fading",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between ",children:[Object(j.jsxs)("h5",{onClick:function(){e.setSelected_chat(c)},className:"card-title text-capitalize",children:[" Email :  ",t.email]}),Object(j.jsx)("p",{className:"align-self-center close",onClick:function(){!function(t){var c=e.chats,s=[].concat(Object(i.a)(c.slice(0,t)),Object(i.a)(c.slice(t+1)));e.setchats(s)}(c)},children:Object(j.jsx)("i",{className:"fas fa-trash-alt"})})]}),Object(j.jsxs)("p",{className:"card-text text-start text-truncate",children:["Order ID : ",t.orderid]})]})},c)}))]})}),Object(j.jsxs)(O.a,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:n,onHide:d,children:[Object(j.jsx)(O.a.Header,{closeButton:!0,children:Object(j.jsx)(O.a.Title,{id:"contained-modal-title-vcenter",children:"ADDING NEW CHAT"})}),Object(j.jsx)(O.a.Body,{children:Object(j.jsxs)("form",{className:"text-center",onSubmit:function(e){return M(e)},children:[Object(j.jsxs)("div",{className:" p-2  ",children:[Object(j.jsx)("input",{type:"text",className:"form-control form-control-lg ",placeholder:"Please Provide Your Email",value:N,onChange:function(e){return w(e.target.value)}}),Object(j.jsx)("small",{id:"email_feed_back",className:"p-4 invalid",children:b}),Object(j.jsx)("input",{type:"text",className:"form-control form-control-lg mt-4",placeholder:"Please Provide Your Order",value:C,onChange:function(e){return k(e.target.value)}}),Object(j.jsx)("small",{id:"order_feed_back",className:"p-4 invalid",children:"Please Provide a Valid Order ID"})]}),Object(j.jsx)("div",{className:"div mt-4 mb-2",children:Object(j.jsx)("button",{className:"btn btn-outline-primary w-25",type:"submit",id:"login_btn",children:F?Object(j.jsxs)(j.Fragment,{children:["ADD ",Object(j.jsx)("i",{className:"fas fa-comment-medical"})," "]}):Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)("span",{children:"."})," ",Object(j.jsx)("span",{children:"."})," ",Object(j.jsx)("span",{children:"."})," "]})})})]})})]})]})};var S=function(){var e=Object(s.useState)(null),t=Object(l.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)([]),o=Object(l.a)(n,2),h=o[0],m=o[1],u=Object(s.useState)(0),x=Object(l.a)(u,2),O=x[0],f=x[1];return Object(s.useEffect)((function(){h.forEach((function(e,t){var s=e.ws;return s.onopen=function(){console.log("ROOM ".concat(t," Connected "))},s.onmessage=function(e){var t=h,s=JSON.parse(e.data);t[c].Messages=[].concat(Object(i.a)(t[c].Messages),[s]),t[c].active=!1,m(t),f(O+1)},function(){s.onclose=function(){console.log("ROOM ".concat(t," Disconnected "))}}}))}),[h,m,c,a,O]),Object(j.jsx)(r.a,{children:Object(j.jsx)(d.c,{children:Object(j.jsx)(d.a,{exact:!0,path:"/",children:Object(j.jsxs)("div",{id:"chat",children:[Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{id:"chat_header",className:" d-flex  justify-content-between p-2",children:[Object(j.jsx)("span",{className:"align-self-center",children:Object(j.jsxs)("h4",{className:" text-capitalize",children:[Object(j.jsx)("i",{className:"fab fa-amazon"})," amazon Support"]})}),Object(j.jsx)("span",{className:"d-flex justify-content-around align-self-cente  w-50",children:null!==c&&h.length>0?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h6",{className:"align-self-center fading",children:["Email : ",h[c].email," "]}),Object(j.jsxs)("h6",{className:"align-self-center  fading",children:["Order ID : ",h[c].orderid," "]}),Object(j.jsx)("span",{onClick:function(){a(null)},className:"align-self-center close",children:Object(j.jsx)("h6",{children:Object(j.jsx)("i",{className:"fas fa-times"})})})]}):null})]})})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(w,{setSelected_chat:a,chats:h,setchats:m}),null!=c&&h.length>0?Object(j.jsx)(b,{chats:h,setchats:m,Selected_chat:c}):Object(j.jsx)("div",{className:"col-9 fading",children:Object(j.jsx)("div",{className:"d-flex  h-100 justify-content-center align-items-center ",children:Object(j.jsx)("h1",{children:"No Chat is selected"})})})]})]}),Object(j.jsx)("div",{className:"container-fluid ",children:Object(j.jsx)("div",{className:"row pt-2 ",children:Object(j.jsxs)("div",{className:"col-12 text-white d-flex justify-content-between  ",id:"footer",children:[Object(j.jsxs)("h6",{className:"footer_text",children:[" This application is created by ",Object(j.jsxs)("a",{href:"mailto:webmaster@example.com",children:["  ",Object(j.jsx)("span",{children:"A"}),"utomated ",Object(j.jsx)("span",{children:"S"}),"olutions ",Object(j.jsx)("span",{children:"E"}),"nterprises "]})," "]}),Object(j.jsx)("h6",{children:"\xa9ASE "})]})})})]})})})})},y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,173)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),s(e),a(e),n(e),i(e)}))};n.a.render(Object(j.jsx)(S,{}),document.getElementById("root")),y()},61:function(e,t,c){},63:function(e,t,c){}},[[171,1,2]]]);
//# sourceMappingURL=main.5ae953d3.chunk.js.map